# ИНСТРУКЦИЯ ПО ПРОВЕДЕНИЮ ДИФФЕРЕНЦИАЛЬНОГО КРИПТОАНАЛИЗА (ВАРИАНТ 5)

Этап 1: Подготовка окружения
[ ] Убедиться, что в папке находятся 4 файла с актуальным кодом:
    1. cipher_engine.h (Ядро шифра Variant 5)
    2. generator_of_data.cpp (Генератор)
    3. analysis_attack.cpp (Анализатор)
    4. attack_last_round.cpp (Атака)

Этап 2: Компиляция инструментов генерации и анализа
[ ] Выполнить команду компиляции для генератора:
    g++ generator_of_data.cpp -o generator -O3 -pthread
[ ] Выполнить команду компиляции для анализатора:
    g++ analysis_attack.cpp -o analysis -O3 -pthread

Этап 3: Генерация данных
[ ] Запустить генератор:
    ./generator
[ ] Дождаться завершения. Проверить наличие файла "pairs_data.txt".
    (Файл содержит пары текстов, зашифрованных на полных 6 раундах).

Этап 4: Поиск характеристик (Analysis)
[ ] Запустить анализатор:
    ./analysis
[ ] Дождаться завершения. Проверить наличие файла "diff_round_5_top.txt".
    (Этот инструмент моделирует 5 раундов шифра и ищет наиболее вероятные переходы разностей).

Этап 5: Настройка параметров атаки (CRITICAL STEP)
[ ] Открыть файл "diff_round_5_top.txt".
[ ] Найти первую строку (характеристику с самым высоким p).
    Пример формата: 1) dX=(9,4,12,0) -> dY=(0,0,0,2) count=...
[ ] Открыть исходный код файла "attack_last_round.cpp".
[ ] Найти строки с константами T_dX и T_dY:
    const uint8_t T_dX[4] = { ... };
    const uint8_t T_dY[4] = { ... };
[ ] Заменить значения в скобках на те, что получены из файла топа.
    Пример замены:
    const uint8_t T_dX[4] = { 9, 4, 12, 0 };
    const uint8_t T_dY[4] = { 0, 0, 0, 2 };
[ ] Сохранить изменения в файле "attack_last_round.cpp".

Этап 6: Компиляция и запуск атаки
[ ] Скомпилировать обновленный файл атаки:
    g++ attack_last_round.cpp -o attack -O3 -pthread
[ ] Запустить атаку:
    ./attack

Этап 7: Верификация результата
[ ] Открыть файл "last_round_key_guess.txt" или смотреть вывод в консоль.
[ ] Верхний кандидат (с наибольшим числом Hits) является восстановленным ключом 6-го раунда.
[ ] Сравнить полученное значение с эталонным (в файле cipher_engine.h массив ROUND_KEYS, последний элемент).
Для текущей конфигурации ожидается ключ: 11 (0xB)
